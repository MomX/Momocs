<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Quantitative calibration, through deviations, for Out and Opn objects — calibrate_deviations • Momocs</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Quantitative calibration, through deviations, for Out and Opn objects — calibrate_deviations"><meta name="description" content="Calculate deviations from original and reconstructed shapes using a
range of harmonic number."><meta property="og:description" content="Calculate deviations from original and reconstructed shapes using a
range of harmonic number."><meta property="og:image" content="http://momx.github.io/Momocs/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Momocs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MomX/Momocs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-ecosystem" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Ecosystem</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-ecosystem"><li><h6 class="dropdown-header" data-toc-skip>Core Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/MomX/">MomX</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momacs/">Momacs</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momit">Momit</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momocs2/">Momocs2</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momstats">Momstats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extended Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momoshop/">Momoshop</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momdata/">Momdata</a></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momfarm">Momfarm</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Legacy Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://momx.github.io/Momocs/">Momocs</a></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quantitative calibration, through deviations, for Out and Opn objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/MomX/Momocs/blob/HEAD/R/core-calibrate.R" class="external-link"><code>R/core-calibrate.R</code></a></small>
      <div class="d-none name"><code>calibrate_deviations.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate deviations from original and reconstructed shapes using a
range of harmonic number.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calibrate_deviations</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_efourier</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_tfourier</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_rfourier</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_sfourier</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_npoly</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_opoly</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calibrate_deviations_dfourier</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">range</span>,</span>
<span>  norm.centsize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dist.method <span class="op">=</span> <span class="va">edm_nearest</span>,</span>
<span>  interpolate.factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dist.nbpts <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>and <code>Out</code> or <code>Opn</code> object on which to calibrate_deviations</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>the shape on which to perform calibrate_deviations</p></dd>


<dt id="arg-range">range<a class="anchor" aria-label="anchor" href="#arg-range"></a></dt>
<dd><p>vector of harmonics (or degree for opoly and npoly on Opn) on which to perform calibrate_deviations.
If not provided, the harmonics corresponding to 0.9, 0.95 and 0.99% of harmonic power
are used.</p></dd>


<dt id="arg-norm-centsize">norm.centsize<a class="anchor" aria-label="anchor" href="#arg-norm-centsize"></a></dt>
<dd><p>logical whether to normalize deviation by the centroid size</p></dd>


<dt id="arg-dist-method">dist.method<a class="anchor" aria-label="anchor" href="#arg-dist-method"></a></dt>
<dd><p>a method such as <a href="edm_nearest.html">edm_nearest</a> to calculate deviations</p></dd>


<dt id="arg-interpolate-factor">interpolate.factor<a class="anchor" aria-label="anchor" href="#arg-interpolate-factor"></a></dt>
<dd><p>a numeric to increase the number of points on the original shape (1 by default)</p></dd>


<dt id="arg-dist-nbpts">dist.nbpts<a class="anchor" aria-label="anchor" href="#arg-dist-nbpts"></a></dt>
<dd><p>numeric the number of points to use for deviations calculations</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>logical whether to print the graph (FALSE is you just want the calculations)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a ggplot object and the full list of intermediate results. See examples.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Note that from version 1.1, the calculation changed and fixed a problem. Before,
the 'best' possible shape was calculated using the highest possible number of harmonics.
This worked well for efourier but not for others (eg rfourier, tfourier) as they
are known to be unstable with high number of harmonics. From now on, Momocs uses
the 'real' shape, as it is (so it must be centered) and uses <a href="coo_interpolate.html">coo_interpolate</a>
to produce <code>interpolate.factor</code> times more coordinates as the shape
has and using the default <code>dist.method</code>, eg <a href="edm_nearest.html">edm_nearest</a>,
the latter finds the euclidean distance, for each point on the reconstructed shape,
the closest point on this interpolated shape. <code>interpolate.factor</code> being set
to 1 by default, no interpolation will be made in you do not ask for it. Note,
that interpolation to decrease artefactual errors may also be done outside
<code>calibrate_deviations</code> and will be probably be removed from it
in further versions.</p>
<p>Note also that this code is quite old now and would need a good review,
planned for 2018.</p>
<p>For *poly methods on Opn objects, the deviations are calculated from a degree 12 polynom.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other calibration:
<code><a href="calibrate_harmonicpower.html">calibrate_harmonicpower()</a></code>,
<code><a href="calibrate_r2.html">calibrate_r2()</a></code>,
<code><a href="calibrate_reconstructions.html">calibrate_reconstructions</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">b5</span> <span class="op">&lt;-</span> <span class="fu"><a href="slice.html">slice</a></span><span class="op">(</span><span class="va">bot</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="co">#for the sake of speed</span></span></span>
<span class="r-in"><span><span class="va">b5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_efourier</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calibrate_deviations-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">b5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_rfourier</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'range' was too high and set to 4 15 27 39 51 63</span>
<span class="r-plt img"><img src="calibrate_deviations-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">b5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_tfourier</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'range' was too high and set to 4 15 27 39 51 63</span>
<span class="r-plt img"><img src="calibrate_deviations-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">b5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_sfourier</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calibrate_deviations-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">o5</span> <span class="op">&lt;-</span> <span class="fu"><a href="slice.html">slice</a></span><span class="op">(</span><span class="va">olea</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="co">#for the sake of speed</span></span></span>
<span class="r-in"><span><span class="va">o5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_opoly</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'range' was missing and set to 1:8</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> deviations calculated from a degree 12 polynom</span>
<span class="r-plt img"><img src="calibrate_deviations-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">o5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_npoly</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'range' was missing and set to 1:8</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> deviations calculated from a degree 12 polynom</span>
<span class="r-plt img"><img src="calibrate_deviations-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">o5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">calibrate_deviations_dfourier</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'range' was missing and set to 1:8</span>
<span class="r-plt img"><img src="calibrate_deviations-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincent Bonhomme, Julien Claude.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.9000.</p>
</div>

    </footer></div>





  </body></html>

