<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Quantitative calibration, through deviations, for Out and Opn objects — calibrate_deviations • Momocs</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Momocs</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Momocs_grindr.html">Layered shape and multivariate plots with grindr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MomX/Momocs">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Quantitative calibration, through deviations, for Out and Opn objects</h1>
    </div>

    
    <p>Calculate deviations from original and reconstructed shapes using a
range of harmonic number.</p>
    

    <pre class="usage"><span class='fu'>calibrate_deviations</span>(<span class='no'>x</span>, <span class='no'>method</span>, <span class='no'>id</span>, <span class='no'>range</span>, <span class='no'>norm.centsize</span>, <span class='no'>dist.method</span>,
  <span class='no'>interpolate.factor</span>, <span class='no'>dist.nbpts</span>, <span class='no'>plot</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>and <code>Out</code> or <code>Opn</code> object on which to calibrate_deviations</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>any method from <code>c('efourier', 'rfourier', 'tfourier')</code> and
<code>'dfourier'</code>.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>the shape on which to perform calibrate_deviations</p></td>
    </tr>
    <tr>
      <th>range</th>
      <td><p>vector of harmonics (or degree for opoly and npoly on Opn) on which to perform calibrate_deviations.
If not provided, the harmonics corresponding to 0.9, 0.95 and 0.99<!-- % of harmonic power -->
are used.</p></td>
    </tr>
    <tr>
      <th>norm.centsize</th>
      <td><p>logical whether to normalize deviation by the centroid size</p></td>
    </tr>
    <tr>
      <th>dist.method</th>
      <td><p>a method such as <a href='edm_nearest.html'>edm_nearest</a> to calculate deviations</p></td>
    </tr>
    <tr>
      <th>interpolate.factor</th>
      <td><p>a numeric to increase the number of points on the original shape (1 by default)</p></td>
    </tr>
    <tr>
      <th>dist.nbpts</th>
      <td><p>numeric the number of points to use for deviations calculations</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>logical whether to print the graph (FALSE is you just want the calculations)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a ggplot object and the full list of intermediate results. See examples.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that from version 1.1, the calculation changed and fixed a problem. Before,
the 'best' possible shape was calculated using the highest possible number of harmonics.
This worked well for efourier but not for others (eg rfourier, tfourier) as they
are known to be unstable with high number of harmonics. From now on, Momocs uses
the 'real' shape, as it is (so it must be centered) and uses <a href='coo_interpolate.html'>coo_interpolate</a>
to produce <code>interpolate.factor</code> times more coordinates as the shape
has and using the default <code>dist.method</code>, eg <a href='edm_nearest.html'>edm_nearest</a>,
the latter finds the euclidean distance, for each point on the reconstructed shape,
the closest point on this interpolated shape. <code>interpolate.factor</code> being set
to 1 by default, no interpolation will be made in you do not ask for it. Note,
that interpolation to decrease artefactual errors may also be done outside
<code>calibrate_deviations</code> and will be probably be removed from it
in further versions.</p>
<p>For *poly methods on Opn objects, the deviations are calculated from a degree 12 polynom.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other calibration: <code><a href='calibrate_harmonicpower.html'>calibrate_harmonicpower</a></code>,
  <code><a href='calibrate_r2.html'>calibrate_r2</a></code>,
  <code><a href='calibrate_reconstructions.html'>calibrate_reconstructions</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>calibrate_deviations</span>(<span class='no'>bot</span>)</div><div class='output co'>#&gt; <span class='message'>method not provided. efourier is used</span></div><div class='img'><img src='calibrate_deviations-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='co'># on Opn</span>
<span class='fu'>calibrate_deviations</span>(<span class='no'>olea</span>)

<span class='co'># lets customize the ggplot</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='no'>gg</span> <span class='kw'>&lt;-</span> <span class='fu'>calibrate_deviations</span>(<span class='no'>bot</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>20</span>)$<span class='no'>gg</span>
<span class='no'>gg</span> + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_abline'>geom_hline</a></span>(<span class='kw'>yintercept</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0.001</span>, <span class='fl'>0.005</span>), <span class='kw'>linetype</span><span class='kw'>=</span><span class='fl'>3</span>)
<span class='no'>gg</span> + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>labs</a></span>(<span class='kw'>col</span><span class='kw'>=</span><span class='st'>"Number of harmonics"</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='st'>"Number of harmonics"</span>,
           <span class='kw'>title</span><span class='kw'>=</span><span class='st'>"Harmonic power"</span>) + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_bw</a></span>()
<span class='no'>gg</span> + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/coord_polar'>coord_polar</a></span>()

<span class='co'>### intermediate results can be accessed eg with:</span>
<span class='no'>shp</span> <span class='kw'>&lt;-</span> <span class='no'>hearts</span>[<span class='fl'>1</span>] <span class='kw'>%&gt;%</span> <span class='fu'><a href='coo_interpolate.html'>coo_interpolate</a></span>(<span class='fl'>360</span>) <span class='kw'>%&gt;%</span> <span class='fu'><a href='coo_samplerr.html'>coo_samplerr</a></span>(<span class='fl'>60</span>) <span class='kw'>%&gt;%</span> <span class='fu'><a href='Out.html'>Out</a></span>()
<span class='fu'>calibrate_deviations</span>(<span class='no'>shp</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>range</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>24</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"efourier"</span>) <span class='kw'>%$%</span>
   <span class='no'>res</span> <span class='kw'>%&gt;%</span> <span class='fu'>apply</span>(<span class='fl'>1</span>, <span class='no'>mean</span>) <span class='kw'>%&gt;%</span> <span class='fu'>plot</span>(<span class='kw'>type</span><span class='kw'>=</span><span class='st'>"b"</span>)
<span class='fu'>calibrate_deviations</span>(<span class='no'>shp</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>range</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>24</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"rfourier"</span>) <span class='kw'>%$%</span>
   <span class='no'>res</span> <span class='kw'>%&gt;%</span> <span class='fu'>apply</span>(<span class='fl'>1</span>, <span class='no'>mean</span>) <span class='kw'>%&gt;%</span> <span class='fu'>plot</span>(<span class='kw'>type</span><span class='kw'>=</span><span class='st'>"b"</span>)
<span class='fu'>calibrate_deviations</span>(<span class='no'>shp</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>range</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>24</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"tfourier"</span>) <span class='kw'>%$%</span>
   <span class='no'>res</span> <span class='kw'>%&gt;%</span> <span class='fu'>apply</span>(<span class='fl'>1</span>, <span class='no'>mean</span>) <span class='kw'>%&gt;%</span> <span class='fu'>plot</span>(<span class='kw'>type</span><span class='kw'>=</span><span class='st'>"b"</span>)

<span class='co'># ... providing an illustration of the e vs r/t fourier approaches developped in the help page.</span>

<span class='co'>### illustration of interpolate.factor</span>
<span class='no'>interp</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>5</span>, <span class='fl'>25</span>)
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>()
<span class='kw'>for</span> (<span class='no'>i</span> <span class='kw'>in</span> <span class='fu'>seq_along</span>(<span class='no'>interp</span>))
<span class='fu'>calibrate_deviations</span>(<span class='no'>shp</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>range</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>24</span>,
   <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"tfourier"</span>, <span class='kw'>interpolate.factor</span><span class='kw'>=</span><span class='no'>interp</span>[<span class='no'>i</span>], <span class='kw'>plot</span><span class='kw'>=</span><span class='fl'>FALSE</span>) <span class='kw'>%$%</span>
   <span class='no'>res</span> <span class='kw'>%&gt;%</span> <span class='fu'>apply</span>(<span class='fl'>1</span>, <span class='no'>mean</span>) <span class='kw'>-&gt;</span> <span class='no'>res</span><span class='kw'>[[</span><span class='no'>i</span>]]

 <span class='co'>### int_5 is more accurate than no inteprolation</span>
 <span class='fu'>sign</span>(<span class='no'>res</span><span class='kw'>[[</span><span class='fl'>2</span>]] - <span class='no'>res</span><span class='kw'>[[</span><span class='fl'>1</span>]])
 <span class='co'>### int 25 is more accurate than int_5, etc.</span>
 <span class='fu'>sign</span>(<span class='no'>res</span><span class='kw'>[[</span><span class='fl'>3</span>]] - <span class='no'>res</span><span class='kw'>[[</span><span class='fl'>2</span>]])
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://www.vincentbonhomme.fr'>Vincent Bonhomme</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
